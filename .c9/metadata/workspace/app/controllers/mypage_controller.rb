{"changed":false,"filter":false,"title":"mypage_controller.rb","tooltip":"/app/controllers/mypage_controller.rb","value":"class MypageController < ApplicationController\n    \n    def index\n        @artist = current_user\n       \n        # 작품수counts, 작품arts\n        if Artist.find_by user_id: current_user.id\n            @counts = Market.where(\"artist_id = ?\", @artist.artist).count\n            @arts = Market.where(artist_id: @artist.artist)\n        else\n            @counts = 0\n            @arts = nil\n        end\n            \n    end\n    \n    def new\n    end\n    \n    # 뷰인어룸 배경 이미지 등록\n    def create\n        u = User.find_by(id: params[:user_id])\n          u.update(room: params[:image]) \n         flash[:notice] = \"사진이 등록되었습니다!\"\n         redirect_to :back       \n    end\n    \n    # 닉네임, 비밀번호 수정\n    def update\n        if User.find_by(nickname: params[:newnick]).present?\n            flash[:notice] = \"이미 존재하는 닉네임입니다\"\n            redirect_to '/mypage'\n        else\n            n = User.find(params[:id])\n            n.update(nickname: params[:newnick])\n            n.save\n            flash[:notice] = \"닉네임이 수정되었습니다!\"\n            redirect_to '/mypage'\n        end\n    end\n    \n    def delete\n    end\n    \n    \n    \n    def artist_profile\n    end\n    \n    # 작가 이력 등록\n    def artist_profile_create\n        Profile.create(artistid: params[:artistid], academic: params[:academic], awards: params[:awards], privateexhibitions: params[:privates], teamexhibitions: params[:teams],\n                    artfairs: params[:fairs], possessions: params[:possessions], etc: params[:etc])\n        redirect_to '/'\n    end\n    \nend\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":50,"column":29},"end":{"row":50,"column":29},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1483683989631}